dist: trusty
language: cpp
compiler: g++
python:
  - "2.7"
addons:
  apt:
    packages:
    - libpython2.7
    - libpython2.7-dev
    - python-setuptools
    - python-pip
    - python-numpy
    - python-matplotlib
    - texlive-latex-base
    - texlive-latex-recommended
    - texlive-lang-german
    - texlive-fonts-recommended
    - texlive-latex-extra 

before_install:
  - sudo apt-get update
  - git clone https://github.com/hiaselhans/OpenGlider.git
  - cd OpenGlider
  - sudo python setup.py install
  - cd ..
  - hg clone https://bitbucket.org/eigen/eigen
  - sudo mkdir /usr/include/eigen3/
  - sudo cp eigen/Eigen/  /usr/include/eigen3/Eigen -r
  - sudo cp eigen/signature_of_eigen3_matrix_library /usr/include/eigen3/
  - git clone https://github.com/pybind/pybind11.git
  - sudo cp pybind11/include/pybind11 /usr/include/python2.7/ -r
  - git clone https://github.com/looooo/paraEigen.git
  - cd paraEigen
  - mkdir build
  - cd build
  - cmake .. -DCMAKE_BUILD_TYPE=Release
  - sudo make -j2 install
  - cd ../..
install:
  - mkdir build
  - cd build
  - cmake .. -DCMAKE_BUILD_TYPE=Release
  - sudo make -j install
  - cd ..

script:
  - sh ./run_all.sh python
  - sh ./create_doc.sh
branches:
  only:
    - master